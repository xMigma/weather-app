{% extends 'base.html' %}

{% block content %}

{% if city != None %}
<div class="container d-flex flex-column align-items-center">
    <div class="icon mb-5 mt-5">
        {% if description == 'clear sky' %}
        <i class="fas fa-sun fa-10x"></i>
        {% elif description == 'few clouds' %}
        <i class="fas fa-cloud fa-10x"></i>
        {% elif description == 'scattered clouds' %}
        <i class="fas fa-cloud-sun fa-10x"></i>
        {% elif description == 'broken clouds' %}
        <i class="fas fa-cloud-meatball fa-10x"></i>
        {% elif description == 'overcast clouds' %}
        <i class="fas fa-cloud fa-10x"></i>
        {% elif description == 'shower rain' %}
        <i class="fas fa-cloud-showers-heavy fa-10x"></i>
        {% elif description == 'rain' %}
        <i class="fas fa-cloud-rain fa-10x"></i>
        {% elif description == 'thunderstorm' %}
        <i class="fas fa-cloud-lightning fa-10x"></i>
        {% elif description == 'snow' %}
        <i class="fas fa-snowflake fa-10x"></i>
        {% elif description == 'mist' %}
        <i class="fas fa-smog fa-10x"></i>
        {% endif %}
    </div>

    <div class="bottom-card">
        <h1>{{ temperature }}Â°</h1>
        <div class="description">
            <h2>{{ description }}</h1>
            <p>{{ city }}, {{ country }}</p>
        </div>

    </div>

</div>
{% endif %}

<script>
    let endpoint =
        "https://api.unsplash.com/search/photos?client_id=Y3ktOKFZnn2oSsIXBA-ZEnsdZbkckYqiDw35U_WW6w0&query={{ city }}";

    fetch(endpoint)
        .then(function (response) {
            return response.json();
        })
        .then(function (data) {
            loadingBackground = data.results[0].urls.regular;
            document.body.style.backgroundImage = `url(${loadingBackground})`;            
        })
</script>

{% endblock %}